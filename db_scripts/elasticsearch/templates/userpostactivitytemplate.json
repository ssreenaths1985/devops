{
"script":{"lang":"mustache","source":"{\n \"_source\": [\"id\",\"postid\",\"userId\",\"rootOrg\",\"org\",\"downVote.dtActivity\",\"downVote.isdownVoted\",\"upVote.dtActivity\",\"upVote.isupVoted\",\"like.dtActivity\",\"like.isLiked\",\"flag.comment\",\"flag.commentType\",\"flag.dtActivity\",\"flag.isFlagged\"],\n  \"size\": {{sizeValue}}, \n  \"query\": {\n    \"bool\": {\n      \"must\": [\n        {\n          \"term\": {\n            \"rootOrg\": {\n              \"value\": \"{{rootOrgValue}}\"\n            }\n          }\n        },\n        {\n          \"term\": {\n            \"org\": {\n              \"value\": \"{{orgValue}}\"\n            }\n          }\n        }\n\t\t{{#mustuserIdstatus}}\n\t\t,\n        {\n          \"terms\": {\n            \"userId\": {{#toJson}}userIdValue{{/toJson}}\n          }\n        }\n\t\t{{/mustuserIdstatus}}\n\t\t{{#mustpostidstatus}}\n\t\t,\n        {\n          \"terms\": {\n            \"postid\": {{#toJson}}postidValue{{/toJson}}\n          }\n        }\n\t\t{{/mustpostidstatus}}\n\t\t{{#mustfilteractivity}}\n\t\t,\n        {\n          \"nested\": {\n            \"path\": \"{{activityPath}}\",\n            \"query\": {\n              \"term\": {\n                \"{{activityField}}\":{\n                  \"value\":\"{{activityValue}}\"\n              }\n            }\n          }\n        }\n      }\n\t\t{{/mustfilteractivity}}\n      ]\n    }\n  }\n    {{#fromfilter}}\n  ,\n  \"from\":{{fromValue}}\n  {{/fromfilter}}\n  {{#sortfilter}}\n  ,\n  \"sort\": [\n    {\n      \"{{sortField}}\": {\n        \"order\": \"{{sortOrder}}\",\n        \"nested_path\": \"{{sortPath}}\"\n      }\n    }\n  ]\n  {{/sortfilter}}\n}"}}
