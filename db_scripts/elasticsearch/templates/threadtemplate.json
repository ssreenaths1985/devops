{
"script":{"lang":"mustache","source":"{\n  \"size\": {{sizeValue}}, \n  \"from\": {{fromValue}}, \n  \"sort\": [\n    {\n      \"{{sortField}}\": {\n        \"order\": \"{{sortOrder}}\"\n      }\n    }\n  ],\n  \"query\": {\n    \"bool\": {\n      \"must\": [\n        {\n          \"term\": {\n            \"rootOrg\": {\n              \"value\": \"{{rootOrgValue}}\"\n            }\n          }\n        },\n        {\n          \"term\": {\n            \"org\": {\n              \"value\": \"{{orgValue}}\"\n            }\n          }\n        }\n\t\t{{#mustfilterstatus}}\n\t\t,\n        {\n          \"terms\": {\n            \"status\": {{#toJson}}mustfilterstatusValue{{/toJson}}\n          }\n        }\n\t\t{{/mustfilterstatus}}\n\t\t{{#mustfilterdtLastModified}}\n\t\t,\n        {\n          \"range\": {\n            \"dtLastModified\": {\n              \"gte\": \"{{mustfilterdtLastModifiedgteValue}}\",\n              \"lt\": \"{{mustfilterdtLastModifiedltValue}}\"\n            }\n          }\n        }\n\t\t{{/mustfilterdtLastModified}}\n\t\t{{#mustfilterhasAcceptedAnswer}}\n\t\t,\n        {\n          \"term\": {\n            \"hasAcceptedAnswer\": {\n              \"value\": \"{{mustfilterhasAcceptedAnswerValue}}\"\n            }\n          }\n        }\n\t\t{{/mustfilterhasAcceptedAnswer}}\n\t\t{{#mustfilterreplyCount}}\n\t\t,\n        {\n          \"term\": {\n            \"replyCount\": {\n              \"value\": \"{{mustfilterreplyCountValue}}\"\n            }\n          }\n        }\n\t\t{{/mustfilterreplyCount}}\n\t\t{{#mustfilterpostKind}}\n\t\t,\n        {\n          \"terms\": {\n            \"postKind\": {{#toJson}}mustfilterpostKindValue{{/toJson}}\n          }\n        }\n\t\t{{/mustfilterpostKind}}\n\t\t{{#mustfilterthreadContributors}}\n\t\t,\n        {\n          \"nested\": {\n            \"path\": \"threadContributors\",\n            \"query\": {\n              \"terms\": {\n                \"threadContributors.threadContributorId\": {{#toJson}}mustfilterthreadContributorsValue{{/toJson}}\n              }\n            }\n          }\n        }\n\t\t{{/mustfilterthreadContributors}}\n\t\t{{#mustfilterrecipients}}\n\t\t,\n        {\n          \"nested\": {\n            \"path\": \"recipients\",\n            \"query\": {\n              \"terms\": {\n                \"recipients.recipientId\": {{#toJson}}mustfilterrecipientsValue{{/toJson}}\n              }\n            }\n          }\n        }\n\t\t{{/mustfilterrecipients}}\n\t\t{{#mustfiltertags}}\n\t\t,\n        {\n          \"nested\": {\n            \"path\": \"tags\",\n            \"query\": {\n              \"terms\": {\n                \"tags.id\": {{#toJson}}mustfiltertagsValue{{/toJson}}\n              }\n            }\n          }\n        }\n\t\t{{/mustfiltertags}}\n\t\t{{#mustfiltersourceid}}\n\t\t,\n        {\n          \"nested\": {\n            \"path\": \"source\",\n            \"query\": {\n              \"terms\": {\n                \"source.id\": {{#toJson}}mustfiltersourceidValue{{/toJson}}\n              }\n            }\n          }\n        }\n\t\t{{/mustfiltersourceid}}\n\t\t{{#mustfiltersourcename}}\n\t\t,\n        {\n          \"nested\": {\n            \"path\": \"source\",\n            \"query\": {\n              \"terms\": {\n                \"source.name.keyword\": {{#toJson}}mustfiltersourcenameValue{{/toJson}}\n              }\n            }\n          }\n        }\n\t\t{{/mustfiltersourcename}}\n\t\t{{#mustfilterhashTags}}\n\t\t,\n        {\n          \"match\": {\n            \"hashTags\": \"{{mustfilterhashTagsValue}}\"\n          }\n        }\n\t\t{{/mustfilterhashTags}}\n\t\t{{#mustshouldfilter}}\n\t\t,\n        {\n          \"bool\": {\n            \"should\": [\n\t\t\t  {{#shouldfilterrecipients}}\n              {\n                \"nested\": {\n                  \"path\": \"recipients\",\n                  \"query\": {\n                    \"terms\": {\n                      \"recipients.recipientId\": {{#toJson}}shouldfilterrecipientsValue{{/toJson}}\n                    }\n                  }\n                }\n              }\n\t\t\t  {{/shouldfilterrecipients}}\n\t\t\t  {{#shouldfiltersourceid}}\n\t\t\t  {{#shouldComma}},{{/shouldComma}}\n              {\n                \"nested\": {\n                  \"path\": \"source\",\n                  \"query\": {\n                    \"terms\": {\n                      \"source.id\": {{#toJson}}shouldfiltersourceidValue{{/toJson}}\n                    }\n                  }\n                }\n              }\n\t\t\t  {{/shouldfiltersourceid}}\n\t\t\t  {{#shouldfiltersourcename}}\n\t\t\t  {{#shouldComma}},{{/shouldComma}}\n              {\n                \"nested\": {\n                  \"path\": \"source\",\n                  \"query\": {\n                    \"terms\": {\n                      \"source.name.keyword\": {{#toJson}}shouldfiltersourcenameValue{{/toJson}}\n                    }\n                  }\n                }\n              }\n\t\t\t  {{/shouldfiltersourcename}}\n\t\t\t  {{#shouldfiltertags}}\n\t\t\t  {{#shouldComma}},{{/shouldComma}}\n              {\n                \"nested\": {\n                  \"path\": \"tags\",\n                  \"query\": {\n                    \"terms\": {\n                      \"tags.id\": {{#toJson}}shouldfiltertagsValue{{/toJson}}\n                    }\n                  }\n                }\n              }\n\t\t\t  {{/shouldfiltertags}}\n\t\t\t  {{#shouldfilterhashTags}}\n\t\t    {{#shouldComma}},{{/shouldComma}}\n        {\n          \"match\": {\n            \"hashTags\": \"{{shouldfilterhashTagsValue}}\"\n          }\n        }\n\t\t{{/shouldfilterhashTags}}\n\t\t\t  {{#shouldfilterthreadContributors}}\n\t\t\t  {{#shouldComma}},{{/shouldComma}}\n              {\n                \"nested\": {\n                  \"path\": \"threadContributors\",\n                  \"query\": {\n                    \"terms\": {\n                      \"threadContributors.threadContributorId\": {{#toJson}}shouldfilterthreadContributorsValue{{/toJson}}\n                    }\n                  }\n                }\n              }\n\t\t\t  {{/shouldfilterthreadContributors}}\n            ]\n          }\n        }\n\t\t{{/mustshouldfilter}}\n      ]\n    }\n  }\n}"}}
